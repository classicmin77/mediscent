<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>AI Emotion Scent Curator â€“ UI Prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 24px 0;
      font-family: -apple-system, BlinkMacSystemFont, "Pretendard", system-ui, sans-serif;
      background: #f4f6f7;
      color: #111;
    }
    .app {
      max-width: 420px;
      margin: 0 auto;
    }
    .screen {
      background: #ffffff;
      border-radius: 24px;
      padding: 24px 20px 28px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
      margin: 0 16px 32px;
    }
    .screen-header {
      font-size: 14px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #9ca3af;
      margin-bottom: 4px;
    }
    h1, h2, h3 {
      margin: 0;
    }
    .title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    .subtitle {
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
      margin-bottom: 20px;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      background: #ecf3f1;
      color: #4b5563;
      font-size: 12px;
      margin-bottom: 14px;
    }
    .pill span.icon {
      font-size: 14px;
    }

    /* cards & layout */
    .row {
      display: flex;
      gap: 10px;
      margin-bottom: 18px;
    }
    .col-3 {
      flex: 1;
    }
    .card {
      background: #f5f7fa;
      border-radius: 18px;
      padding: 14px 14px 16px;
    }
    .card-soft {
      background: #f9fafb;
      border-radius: 18px;
      padding: 14px 14px 16px;
      border: 1px solid #e5e7eb;
    }
    .card-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #4b5563;
    }
    .card-value {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .card-note {
      font-size: 12px;
      color: #6b7280;
      line-height: 1.4;
    }

    /* buttons */
    .btn-primary {
      display: block;
      width: 100%;
      margin-top: 24px;
      padding: 13px 0;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #9dc2b8, #7ca99b);
      color: #ffffff;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
    }
    .btn-primary:active {
      opacity: 0.9;
    }
    .btn-ghost {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      padding: 5px 10px;
      font-size: 12px;
      color: #6b7280;
      cursor: pointer;
    }
    .btn-small {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 7px 12px;
      border-radius: 999px;
      border: none;
      background: #e2f0ec;
      color: #1f2933;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
    }

    /* sliders */
    .slider-group {
      margin-bottom: 16px;
    }
    .slider-label {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .slider-label span.sub {
      font-size: 11px;
      color: #9ca3af;
      font-weight: 400;
    }
    input[type="range"] {
      width: 100%;
      -webkit-appearance: none;
      height: 4px;
      border-radius: 999px;
      background: #e5e7eb;
      outline: none;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #9dc2b8;
      border: 3px solid #ffffff;
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.6);
      cursor: pointer;
    }

    /* capture blocks */
    .capture-block {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 16px;
      background: #f9fafb;
      border: 1px dashed #d1d5db;
    }
    .capture-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #ecf3f1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .capture-text-main {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 2px;
    }
    .capture-text-sub {
      font-size: 11px;
      color: #6b7280;
    }
    .capture-status {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 4px;
    }

    /* status tags */
    .status-tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #eef2ff;
      color: #4f46e5;
      margin-top: 6px;
    }
    .status-tag.ok {
      background: #e0f2fe;
      color: #0369a1;
    }

    /* recommendation cards */
    .scent-card {
      border-radius: 18px;
      padding: 14px 14px 16px;
      background: #f5f7fa;
      margin-bottom: 12px;
    }
    .scent-card.main {
      background: #ecf3f1;
      border: 1px solid #d1e4de;
    }
    .scent-tag {
      display: inline-flex;
      align-items: center;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #e5f1ee;
      color: #3f4f4a;
      margin-bottom: 6px;
    }
    .scent-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .scent-notes {
      font-size: 13px;
      color: #4b5563;
      margin-bottom: 4px;
    }
    .scent-desc {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 8px;
    }
    .scent-meta {
      font-size: 11px;
      color: #9ca3af;
    }

    .divider-label {
      font-size: 11px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin: 18px 0 8px;
    }

    .mt-8 { margin-top: 8px; }
    .mt-12 { margin-top: 12px; }
    .mt-16 { margin-top: 16px; }
    .mt-20 { margin-top: 20px; }
    .text-right { text-align: right; }

    /* history */
    .history-date {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 4px;
    }
    .history-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 8px;
      border-radius: 999px;
      background: #ecf3f1;
      font-size: 11px;
      color: #4b5563;
      margin-top: 4px;
    }
  </style>
</head>
<body>
<div class="app">

  <!-- SCREEN 1: Onboarding -->
  <section class="screen" id="screen-0">
    <div class="screen-header">AI Emotion Scent Curator</div>
    <div class="title">ì–¼êµ´ê³¼ ëª©ì†Œë¦¬ë¡œ<br>ì˜¤ëŠ˜ì˜ í–¥ì„ íë ˆì´ì…˜í•´ìš”</div>
    <p class="subtitle">
      Google Vision ì–¼êµ´ ê°ì •ê³¼ Hume ìŒì„± ê°ì • ì—”ì§„ì„ í™œìš©í•´<br>
      ì£¼ì¸ë‹˜ì˜ ìƒíƒœì— ê°€ì¥ ì˜ ë§ëŠ” í–¥ ë…¸íŠ¸ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤.
    </p>

    <div class="row">
      <div class="col-3">
        <div class="card-soft">
          <div class="card-title">ê°ì • ì¸ì‹</div>
          <div class="card-note">ì–¼êµ´ í‘œì • ê¸°ë°˜<br>Vision Emotion</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card-soft">
          <div class="card-title">ìŒì„± ê°ì •</div>
          <div class="card-note">ëª©ì†Œë¦¬ í†¤ ê¸°ë°˜<br>Hume Voice</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card-soft">
          <div class="card-title">í–¥ ë§¤ì¹­</div>
          <div class="card-note">í˜„ì¬ ê°ì •ê³¼<br>í–¥ ë…¸íŠ¸ ë§¤ì¹­</div>
        </div>
      </div>
    </div>

    <button class="btn-primary" data-next-screen="1">
      ì˜¤ëŠ˜ì˜ ê°ì • ì¸¡ì • ì‹œì‘í•˜ê¸°
    </button>
  </section>

  <!-- SCREEN 2: Emotion Input + Capture -->
  <section class="screen" id="screen-1">
    <div class="screen-header">Step 1 of 3</div>
    <div class="title">ì˜¤ëŠ˜ ì£¼ì¸ë‹˜ì˜ ìƒíƒœë¥¼ ì•Œë ¤ì£¼ì„¸ìš”</div>
    <p class="subtitle">
      ê°„ë‹¨í•œ ìŠ¬ë¼ì´ë”ì™€ ì–¼êµ´, ìŒì„± ê¸°ë¡ì„ ê¸°ë°˜ìœ¼ë¡œ<br>
      ê°ì • í”„ë¡œí•„ì„ ìƒì„±í•©ë‹ˆë‹¤.
    </p>

    <!-- sliders -->
    <div class="pill"><span class="icon">ğŸ§ </span>ê¸°ë³¸ ê°ì • ì„¤ë¬¸</div>

    <div class="slider-group">
      <div class="slider-label">
        ê¸´ì¥ â†” ì´ì™„
        <span class="sub">ì˜¤ëŠ˜ ì „ë°˜ì ì¸ ê¸´ì¥ê°</span>
      </div>
      <input type="range" min="0" max="100" value="70">
    </div>

    <div class="slider-group">
      <div class="slider-label">
        ìš°ìš¸ â†” í™œë ¥
        <span class="sub">ê¸°ë¶„ê³¼ ì—ë„ˆì§€</span>
      </div>
      <input type="range" min="0" max="100" value="30">
    </div>

    <div class="slider-group">
      <div class="slider-label">
        ì§‘ì¤‘ â†” ì‚°ë§Œ
        <span class="sub">ìƒê°ì˜ ì„ ëª…í•¨</span>
      </div>
      <input type="range" min="0" max="100" value="55">
    </div>

    <div class="slider-group">
      <div class="slider-label">
        ì˜ˆë¯¼ â†” ì•ˆì •
        <span class="sub">ê°ì • ê¸°ë³µ ì •ë„</span>
      </div>
      <input type="range" min="0" max="100" value="65">
    </div>

    <div class="slider-group">
      <div class="slider-label">
        í”¼ë¡œ â†” íšŒë³µ
        <span class="sub">ëª¸ Â· ë§ˆìŒ í”¼ë¡œê°</span>
      </div>
      <input type="range" min="0" max="100" value="80">
    </div>

    <!-- face capture -->
    <div class="divider-label">FACE Â· VISION API</div>
    <div class="capture-block">
      <div class="capture-icon">ğŸ“·</div>
      <div style="flex:1;">
        <div class="capture-text-main">ì–¼êµ´ ê°ì • ë¶„ì„</div>
        <div class="capture-text-sub">
          3ì´ˆ ë™ì•ˆ ì¹´ë©”ë¼ë¥¼ ë°”ë¼ë´ ì£¼ì„¸ìš”. Vision APIê°€ joy / anger / sorrow ë“±ì„ ë¶„ì„í•©ë‹ˆë‹¤.
        </div>
        <div class="capture-status">ìƒíƒœ: ì•„ì§ ì´¬ì˜ ì „</div>
      </div>
      <button class="btn-small">ì–¼êµ´ ìº¡ì²˜</button>
    </div>

    <!-- voice capture -->
    <div class="divider-label">VOICE Â· HUME AI</div>
    <div class="capture-block">
      <div class="capture-icon">ğŸ™ï¸</div>
      <div style="flex:1;">
        <div class="capture-text-main">ìŒì„± ê°ì • ë¶„ì„</div>
        <div class="capture-text-sub">
          ì§€ê¸ˆ ê¸°ë¶„ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ë§í•´ ì£¼ì„¸ìš”. Humeê°€ calmness / stress / energyë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
        </div>
        <div class="capture-status">ìƒíƒœ: ì•„ì§ ë…¹ìŒ ì „</div>
      </div>
      <button class="btn-small">ë…¹ìŒ ì‹œì‘</button>
    </div>

    <div class="mt-12 text-right">
      <button class="btn-ghost">ì–¼êµ´Â·ìŒì„± ì—†ì´ ì„¤ë¬¸ë§Œ ì§„í–‰</button>
    </div>

    <button
      class="btn-primary"
      data-action="analyze-emotion"
      data-next-screen="2"
    >
      AI ê°ì • ë¶„ì„í•˜ê¸°
    </button>
  </section>

  <!-- SCREEN 3: Analyzing -->
  <section class="screen" id="screen-2">
    <div class="screen-header">Step 2 of 3</div>
    <div class="title">AIê°€ ê°ì •ì„ ì½ëŠ” ì¤‘ì…ë‹ˆë‹¤</div>
    <p class="subtitle">
      ì–¼êµ´ Â· ìŒì„± Â· ì„¤ë¬¸ ë°ì´í„°ë¥¼ Vision Â· Hume ì—”ì§„ìœ¼ë¡œ ë¶„ì„í•´<br>
      ì£¼ì¸ë‹˜ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì •ë°€í•˜ê²Œ ì¸¡ì •í•˜ê³  ìˆì–´ìš”.
    </p>

    <div class="card" style="text-align:center; padding:26px 16px;">
      <div style="font-size:40px; margin-bottom:8px;">ğŸŒ«ï¸</div>
      <div style="font-size:14px; font-weight:500; margin-bottom:4px;">
        Emotion Profile Synthesizing...
      </div>
      <div class="card-note">
        ê¸´ì¥ Â· í™œë ¥ Â· ì§‘ì¤‘ Â· í”¼ë¡œ Â· ì˜ˆë¯¼ë„ì˜ ê· í˜•ì„ ê³„ì‚° ì¤‘ì…ë‹ˆë‹¤.
      </div>
    </div>

    <div class="row mt-16">
      <div class="col-3">
        <div class="card-soft">
          <div class="card-title">Face Â· Vision</div>
          <div class="card-note">joy, anger, sorrow<br>likelihood ë¶„ì„</div>
          <div class="status-tag"><span>â—</span>ë¶„ì„ ì¤‘</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card-soft">
          <div class="card-title">Voice Â· Hume</div>
          <div class="card-note">calmness, stress,<br>energy ë¶„ì„</div>
          <div class="status-tag ok"><span>âœ”</span>ì—…ë¡œë“œ ì™„ë£Œ</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card-soft">
          <div class="card-title">Survey</div>
          <div class="card-note">ìŠ¬ë¼ì´ë” ì„¤ë¬¸<br>ê°’ í†µí•©</div>
          <div class="status-tag ok"><span>âœ”</span>ì…ë ¥ ì™„ë£Œ</div>
        </div>
      </div>
    </div>

    <p class="subtitle" style="margin-top:18px; margin-bottom:0; font-size:12px;">
      â€» ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì´ í™”ë©´ì´ 2~4ì´ˆ ì •ë„ ë…¸ì¶œë©ë‹ˆë‹¤.
    </p>
  </section>

  <!-- SCREEN 4: Emotion Result -->
  <section class="screen" id="screen-3">
    <div class="screen-header">Step 3 of 3</div>
    <div class="title">ì˜¤ëŠ˜ì˜ ê°ì • ë¦¬í¬íŠ¸</div>
    <p class="subtitle" id="emotion-summary">
      ì–¼êµ´Â·ëª©ì†Œë¦¬Â·ì„¤ë¬¸ì„ ëª¨ë‘ ê³ ë ¤í–ˆì„ ë•Œ,<br>
      ì˜¤ëŠ˜ ì£¼ì¸ë‹˜ì€ <b>ê¸´ì¥ë„ì™€ í”¼ë¡œë„ëŠ” ë†’ê³ , í™œë ¥ì€ ë‚®ì€ ìƒíƒœ</b>ë¡œ ë³´ì—¬ìš”.
    </p>

    <div class="row">
      <div class="col-3">
        <div class="card">
          <div class="card-title">ê¸´ì¥ë„</div>
          <div class="card-value" id="value-tension">78 / 100</div>
          <div class="card-note" id="note-tension">ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë‹¤ì†Œ ë†’ì€ í¸ì´ì—ìš”.</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card">
          <div class="card-title">í™œë ¥</div>
          <div class="card-value" id="value-vitality">32 / 100</div>
          <div class="card-note" id="note-vitality">ì—ë„ˆì§€ê°€ ë§ì´ ë–¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card">
          <div class="card-title">ì§‘ì¤‘ë ¥</div>
          <div class="card-value" id="value-focus">55 / 100</div>
          <div class="card-note" id="note-focus">ì§‘ì¤‘ì´ ì¡°ê¸ˆ ë¶„ì‚°ëœ ìƒíƒœì˜ˆìš”.</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-3">
        <div class="card">
          <div class="card-title">ì˜ˆë¯¼ë„</div>
          <div class="card-value" id="value-sensitivity">64 / 100</div>
          <div class="card-note" id="note-sensitivity">ì‘ì€ ìê·¹ì—ë„ ì˜ˆë¯¼í•  ìˆ˜ ìˆì–´ìš”.</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card">
          <div class="card-title">í”¼ë¡œë„</div>
          <div class="card-value" id="value-fatigue">82 / 100</div>
          <div class="card-note" id="note-fatigue">ëª¸ê³¼ ë§ˆìŒ ëª¨ë‘ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>
        </div>
      </div>
      <div class="col-3">
        <div class="card-soft">
          <div class="card-title">ë¶„ì„ ì—”ì§„</div>
          <div class="card-note">
            Face: Vision<br>
            Voice: Hume<br>
            Text: GPT
          </div>
        </div>
      </div>
    </div>

    <button class="btn-primary" data-next-screen="4">
      ì´ ê°ì •ì— ë§ëŠ” í–¥ ì¶”ì²œ ë°›ê¸°
    </button>

    <div class="mt-12">
      <button class="btn-ghost" data-next-screen="5">ì§€ë‚œ ê°ì • Â· í–¥ ê¸°ë¡ ë³´ê¸°</button>
    </div>
  </section>

  <!-- SCREEN 5: Scent Recommendation -->
  <section class="screen" id="screen-4">
    <div class="screen-header">Scent Recommendation</div>
    <div class="title">ì˜¤ëŠ˜ ì£¼ì¸ë‹˜ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” í–¥</div>
    <p class="subtitle">
      ë†’ì€ ê¸´ì¥ë„ì™€ í”¼ë¡œë„ë¥¼ ì™„í™”í•˜ë©´ì„œ<br>
      ê³¼ë„í•œ ìê·¹ ì—†ì´ ì•ˆì •ê°ì„ ì£¼ëŠ” ì¡°í•©ì„ ê³¨ëì–´ìš”.
    </p>

    <div class="pill">
      <span class="icon">ğŸŒ¿</span>
      <span id="scent-keyword">ê¸´ì¥ ì™„í™” Â· í”¼ë¡œ íšŒë³µ í¬ì»¤ìŠ¤</span>
    </div>

    <div class="scent-card main">
      <div class="scent-tag">ë©”ì¸ ì¶”ì²œ</div>
      <div class="scent-name" id="main-scent-name">Relaxing Floral</div>
      <div class="scent-notes" id="main-scent-notes">
        ë¼ë²¤ë” Â· ì¹´ëª¨ë§ˆì¼ Â· ë„¤ë¡¤ë¦¬ Â· ìƒŒë‹¬ìš°ë“œ
      </div>
      <div class="scent-desc" id="main-scent-desc">
        ê³¼ë¶€í•˜ëœ ì‹ ê²½ì„ ë¶€ë“œëŸ½ê²Œ ëˆŒëŸ¬ì£¼ëŠ” ì§„ì • í”Œë¡œëŸ´ ìš°ë”” ë¸”ë Œë“œë¡œ,
        ì ë“¤ê¸° ì „ í˜¹ì€ ê³¼í•˜ê²Œ ê¸´ì¥ëœ í•˜ë£¨ì˜ ëì— ì“°ê¸° ì¢‹ìŠµë‹ˆë‹¤.
      </div>
      <div class="scent-meta" id="main-scent-meta">
        ê¸°ì¤€: ê¸´ì¥ë„ 78 Â· í”¼ë¡œë„ 82 Â· ì˜ˆë¯¼ë„ 64
      </div>
    </div>

    <!-- ê³ ì • ì„œë¸Œ í–¥ ì¶”ì²œ -->
    <div class="scent-card">
      <div class="scent-name">Energy Herb</div>
      <div class="scent-notes">í˜í¼ë¯¼íŠ¸ Â· ë¡œì¦ˆë§ˆë¦¬ Â· ë¼ì„</div>
      <div class="scent-desc">
        í”¼ë¡œë¡œ ë¬´ê±°ì›Œì§„ ëª¸ê³¼ ë¨¸ë¦¬ë¥¼ ê°€ë³ê²Œ ê¹¨ì›Œì£¼ëŠ” í—ˆë¸Œ ì‹œíŠ¸ëŸ¬ìŠ¤ ì¡°í•©ì…ë‹ˆë‹¤.
        ì˜¤í›„ ì‹œê°„ í˜¹ì€ ì‘ì—… ì „ ë¦¬í”„ë ˆì‹œì— ì í•©í•©ë‹ˆë‹¤.
      </div>
      <div class="scent-meta">
        ê¸°ì¤€: í”¼ë¡œë„ 82 Â· ì§‘ì¤‘ë ¥ 55
      </div>
    </div>

    <div class="scent-card">
      <div class="scent-name">Soft Citrus-Tea</div>
      <div class="scent-notes">ê·¸ë¦°í‹° Â· í™”ì´íŠ¸í‹° Â· ì‹œíŠ¸ëŸ¬ìŠ¤</div>
      <div class="scent-desc">
        ê¸°ë¶„ì„ ì‚´ì§ ë„ì›Œì£¼ë˜ ê³¼ìê·¹ ì—†ì´ ì”ì”í•˜ê²Œ ìœ ì§€ì‹œì¼œ ì£¼ëŠ” í‹° ë² ì´ìŠ¤ ì‹œíŠ¸ëŸ¬ìŠ¤ì…ë‹ˆë‹¤.
      </div>
      <div class="scent-meta">
        ê¸°ì¤€: í™œë ¥ 32 Â· calmness ì¤‘ê°„ëŒ€
      </div>
    </div>

    <!-- ê°ì •ì— ë”°ë¼ ìë™ìœ¼ë¡œ ë°”ë€ŒëŠ” ì œí’ˆ ë¼ì¸ì—… -->
    <div class="divider-label">RECOMMENDED LINE-UP</div>
    <div id="product-list"></div>

    <button class="btn-primary">ì¶”ì²œ í–¥ ë¼ì¸ì—… ì œí’ˆ ë³´ëŸ¬ê°€ê¸°</button>

    <div class="mt-12">
      <button class="btn-ghost" data-next-screen="5">ì§€ë‚œ ê°ì • Â· í–¥ ê¸°ë¡ ë³´ê¸°</button>
    </div>
  </section>

  <!-- SCREEN 6: History -->
  <section class="screen" id="screen-5">
    <div class="screen-header">History</div>
    <div class="title">ì§€ë‚œ ê°ì • Â· í–¥ ê¸°ë¡</div>
    <p class="subtitle">
      ìµœê·¼ì— ì¸¡ì •í•œ ê°ì • í”„ë¡œí•„ê³¼ ê·¸ë•Œ ì¶”ì²œë˜ì—ˆë˜ í–¥ì„<br>
      ê°„ë‹¨í•œ ë¡œê·¸ í˜•íƒœë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.
    </p>

    <div id="history-list"></div>

    <button class="btn-primary" data-next-screen="0">
      ë‹¤ì‹œ ê°ì • ì¸¡ì •í•˜ëŸ¬ ê°€ê¸°
    </button>
  </section>

</div>

<script>
  // ----- í™”ë©´ ì „í™˜ ë¡œì§ -----
  const screens = document.querySelectorAll('.screen');
  let currentScreenIndex = 0;
  let emotionProfile = null;

  function showScreen(index) {
    screens.forEach((screen, i) => {
      screen.style.display = i === index ? 'block' : 'none';
    });
    currentScreenIndex = index;

    // íˆìŠ¤í† ë¦¬ í™”ë©´ì— ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ìƒˆë¡œ ë Œë”ë§
    if (index === 5) {
      renderHistoryList();
    }
  }

  // ----- ìŠ¬ë¼ì´ë” ê°’ â†’ ê°ì • í”„ë¡œí•„ ê³„ì‚° -----
  function calculateEmotionFromSliders() {
    const sliders = document.querySelectorAll('.slider-group input[type="range"]');
    if (sliders.length < 5) {
      return null;
    }

    const values = Array.from(sliders).map(slider => Number(slider.value) || 0);

    const tension = values[0];      // ê¸´ì¥ë„
    const vitality = values[1];     // í™œë ¥
    const focus = values[2];        // ì§‘ì¤‘ë ¥
    const sensitivity = values[3];  // ì˜ˆë¯¼ë„
    const fatigue = values[4];      // í”¼ë¡œë„

    return { tension, vitality, focus, sensitivity, fatigue };
  }

  // ----- ì ìˆ˜ì— ë”°ë¼ ì„¤ëª… ë¬¸êµ¬ ìƒì„± -----
  function getNote(type, score) {
    if (type === 'tension') {
      if (score < 30) return 'ì „ë°˜ì ìœ¼ë¡œ ê¸´ì¥ê°ì´ ë‚®ê³  ì—¬ìœ ë¡œìš´ ìƒíƒœì˜ˆìš”.';
      if (score < 60) return 'ì•½ê°„ì˜ ê¸´ì¥ì€ ìˆì§€ë§Œ ë¬´ë¦¬ ì—†ëŠ” ìˆ˜ì¤€ì´ì—ìš”.';
      return 'ìŠ¤íŠ¸ë ˆìŠ¤ì™€ ê¸´ì¥ì´ ë‹¤ì†Œ ë†’ì€ í¸ì´ì—ìš”.';
    }
    if (type === 'vitality') {
      if (score < 30) return 'ì—ë„ˆì§€ê°€ ë§ì´ ë–¨ì–´ì ¸ ìˆê³  ë¬´ê¸°ë ¥í•¨ì´ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”.';
      if (score < 60) return 'ì—ë„ˆì§€ê°€ ë³´í†µ ìˆ˜ì¤€ì´ë©° ì¼ìƒ í™œë™ì€ ë¬´ë¦¬ ì—†ì´ ê°€ëŠ¥í•´ìš”.';
      return 'í™œë ¥ì´ ì¢‹ì€ í¸ì´ë¼ ìƒˆë¡œìš´ ì¼ì— ë„ì „í•˜ê¸° ì¢‹ì€ ìƒíƒœì˜ˆìš”.';
    }
    if (type === 'focus') {
      if (score < 30) return 'ì§‘ì¤‘ì´ ì˜ ë˜ì§€ ì•Šê³  ì‚°ë§Œí•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”.';
      if (score < 60) return 'ì§‘ì¤‘ê³¼ ë¶„ì‚°ì´ ì˜¤ê°€ëŠ” ë³´í†µ ìˆ˜ì¤€ì´ì—ìš”.';
      return 'ì§‘ì¤‘ë ¥ì´ ì˜ ìœ ì§€ë˜ëŠ” í¸ì´ì—ìš”.';
    }
    if (type === 'sensitivity') {
      if (score < 30) return 'ìê·¹ì— ë¹„êµì  ë‘”ê°í•˜ê³ , ê°ì •ì´ ì‰½ê²Œ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” í¸ì´ì—ìš”.';
      if (score < 60) return 'ê°ì • ê¸°ë³µì´ ìˆì§€ë§Œ ì „ì²´ì ìœ¼ë¡œëŠ” ê´€ë¦¬ ê°€ëŠ¥í•œ ìˆ˜ì¤€ì´ì—ìš”.';
      return 'ì‘ì€ ìê·¹ì—ë„ ì˜ˆë¯¼í•˜ê²Œ ë°˜ì‘í•  ìˆ˜ ìˆëŠ” ìƒíƒœì˜ˆìš”.';
    }
    if (type === 'fatigue') {
      if (score < 30) return 'í”¼ë¡œë„ê°€ ë‚®ê³  ëª¸ê³¼ ë§ˆìŒì´ ë¹„êµì  ê°€ë²¼ìš´ ìƒíƒœì˜ˆìš”.';
      if (score < 60) return 'ì ë‹¹í•œ í”¼ë¡œê°€ ìˆì§€ë§Œ íšŒë³µ ê°€ëŠ¥í•œ ìˆ˜ì¤€ì´ì—ìš”.';
      return 'ëª¸ê³¼ ë§ˆìŒ ëª¨ë‘ íœ´ì‹ì´ ê¼­ í•„ìš”í•œ ìˆ˜ì¤€ì˜ í”¼ë¡œì˜ˆìš”.';
    }
    return '';
  }

  // ----- ìš”ì•½ ë¬¸ì¥ ìƒì„± -----
  function buildSummary(profile) {
    const parts = [];

    if (profile.tension > 60) {
      parts.push('ê¸´ì¥ë„ëŠ” ë†’ì€ í¸ì´ê³ ');
    } else if (profile.tension < 30) {
      parts.push('ê¸´ì¥ë„ëŠ” ë‚®ê³  ê½¤ ì—¬ìœ ë¡œìš´ í¸ì´ê³ ');
    } else {
      parts.push('ê¸´ì¥ë„ëŠ” ë³´í†µ ìˆ˜ì¤€ì´ê³ ');
    }

    if (profile.vitality < 40) {
      parts.push('í™œë ¥ì€ ë‹¤ì†Œ ë–¨ì–´ì ¸ ìˆìœ¼ë©°');
    } else if (profile.vitality > 60) {
      parts.push('í™œë ¥ì€ ì¢‹ì€ í¸ì´ë©°');
    } else {
      parts.push('í™œë ¥ì€ ë¬´ë‚œí•œ ìˆ˜ì¤€ì´ë©°');
    }

    if (profile.fatigue > 60) {
      parts.push('í”¼ë¡œë„ëŠ” ë†’ì€ ìƒíƒœì˜ˆìš”.');
    } else if (profile.fatigue < 35) {
      parts.push('í”¼ë¡œë„ëŠ” ë‚®ì€ í¸ì´ì—ìš”.');
    } else {
      parts.push('í”¼ë¡œë„ëŠ” ë³´í†µ ìˆ˜ì¤€ì´ì—ìš”.');
    }

    return parts.join(' ');
  }

  // ----- ê°ì • ë¦¬í¬íŠ¸ í™”ë©´ ì—…ë°ì´íŠ¸ -----
  function updateEmotionResultUI(profile) {
    const summaryEl = document.getElementById('emotion-summary');
    if (summaryEl) {
      const summary = buildSummary(profile);
      summaryEl.innerHTML =
        `ì–¼êµ´Â·ëª©ì†Œë¦¬Â·ì„¤ë¬¸ì„ ëª¨ë‘ ê³ ë ¤í–ˆì„ ë•Œ,<br>ì˜¤ëŠ˜ ì£¼ì¸ë‹˜ì€ <b>${summary}</b>`;
    }

    const tensionValueEl = document.getElementById('value-tension');
    const vitalityValueEl = document.getElementById('value-vitality');
    const focusValueEl = document.getElementById('value-focus');
    const sensitivityValueEl = document.getElementById('value-sensitivity');
    const fatigueValueEl = document.getElementById('value-fatigue');

    const tensionNoteEl = document.getElementById('note-tension');
    const vitalityNoteEl = document.getElementById('note-vitality');
    const focusNoteEl = document.getElementById('note-focus');
    const sensitivityNoteEl = document.getElementById('note-sensitivity');
    const fatigueNoteEl = document.getElementById('note-fatigue');

    if (tensionValueEl) tensionValueEl.textContent = `${profile.tension} / 100`;
    if (vitalityValueEl) vitalityValueEl.textContent = `${profile.vitality} / 100`;
    if (focusValueEl) focusValueEl.textContent = `${profile.focus} / 100`;
    if (sensitivityValueEl) sensitivityValueEl.textContent = `${profile.sensitivity} / 100`;
    if (fatigueValueEl) fatigueValueEl.textContent = `${profile.fatigue} / 100`;

    if (tensionNoteEl) tensionNoteEl.textContent = getNote('tension', profile.tension);
    if (vitalityNoteEl) vitalityNoteEl.textContent = getNote('vitality', profile.vitality);
    if (focusNoteEl) focusNoteEl.textContent = getNote('focus', profile.focus);
    if (sensitivityNoteEl) sensitivityNoteEl.textContent = getNote('sensitivity', profile.sensitivity);
    if (fatigueNoteEl) fatigueNoteEl.textContent = getNote('fatigue', profile.fatigue);
  }

  // ğŸ”¥ ê°ì • í”„ë¡œí•„ â†’ í–¥ + ì œí’ˆ ì¶”ì²œ ì„¤ì • ê³„ì‚°
  function getScentConfig(profile) {
    const { tension, vitality, focus, sensitivity, fatigue } = profile;

    // A. ê³¼ê¸´ì¥ + ê³¼í”¼ë¡œ + ì €í™œë ¥
    if (tension >= 70 && fatigue >= 70 && vitality <= 40) {
      return {
        keyword: 'ê¸´ì¥ ì™„í™” Â· í”¼ë¡œ íšŒë³µ í¬ì»¤ìŠ¤',
        name: 'Relaxing Floral',
        notes: 'ë¼ë²¤ë” Â· ì¹´ëª¨ë§ˆì¼ Â· ë„¤ë¡¤ë¦¬ Â· ìƒŒë‹¬ìš°ë“œ',
        desc: 'ê³¼ë„í•œ ê¸´ì¥ê³¼ í”¼ë¡œë¡œ ê³¼ë¶€í•˜ëœ ì‹ ê²½ê³„ë¥¼ ë¶€ë“œëŸ½ê²Œ ì•ˆì •ì‹œì¼œ ì£¼ëŠ” í”Œë¡œëŸ´ ìš°ë”” ì¡°í•©ì…ë‹ˆë‹¤. ì ë“¤ê¸° ì „, ì‰¬ëŠ” ë‚  ë£¨í‹´ì— ì˜ ì–´ìš¸ë ¤ìš”.',
        products: [
          {
            name: 'MF-01 Deep Sleep Perfume',
            type: 'ì˜¤ ë“œ í¼í“¸',
            usage: 'Night / Sleep',
            desc: 'ìˆ˜ë©´ ì „ ëª©Â·ì†ëª©ì— ê°€ë³ê²Œ ì‚¬ìš©í•˜ëŠ” ë”¥ ë¦´ë™ìŠ¤ í¼í“¸.'
          },
          {
            name: 'MD-01 Night Calm Diffuser',
            type: 'ë””í“¨ì €',
            usage: 'Bedside',
            desc: 'ì¹¨ì‹¤ ì‚¬ì´ë“œ í…Œì´ë¸”ìš©, ë¼ë²¤ë”Â·ì¹´ëª¨ë§ˆì¼ ì¤‘ì‹¬ì˜ ìˆ˜ë©´ ë””í“¨ì €.'
          },
          {
            name: 'MS-01 Pillow Mist',
            type: 'í•„ë¡œìš° ë¯¸ìŠ¤íŠ¸',
            usage: 'Pillow & Bedding',
            desc: 'ë² ê°œì™€ ì¹¨êµ¬ì— ë¶„ì‚¬í•´ ìˆ˜ë©´ ë¬´ë“œë¥¼ ë§Œë“¤ì–´ ì£¼ëŠ” ë¯¸ìŠ¤íŠ¸.'
          }
        ]
      };
    }

    // B. ì˜ˆë¯¼ë„ ë†’ê³  ì•½ê°„ ê¸´ì¥ëœ ìƒíƒœ
    if (sensitivity >= 65 && tension >= 55) {
      return {
        keyword: 'ì‹ ê²½ ì•ˆì • Â· ê°ì • ë³´í˜¸',
        name: 'Soft Cocoon Musk',
        notes: 'ì•„ì´ë¦¬ìŠ¤ Â· í™”ì´íŠ¸ë¨¸ìŠ¤í¬ Â· ë°”ë‹ë¼ Â· ìºì‹œë¯¸ì–´ ìš°ë“œ',
        desc: 'ì‘ì€ ìê·¹ì—ë„ ì˜ˆë¯¼í•´ì§€ê¸° ì‰¬ìš´ ë‚ , ìŠ¤ìŠ¤ë¡œë¥¼ ê°ì‹¸ ì•ˆë“¯ ë¶€ë“œëŸ¬ìš´ ì½”ì¿¤ì„ ë§Œë“¤ì–´ ì£¼ëŠ” íŒŒìš°ë”ë¦¬ ë¨¸ìŠ¤í¬ ê³„ì—´ì…ë‹ˆë‹¤.',
        products: [
          {
            name: 'CM-01 Cocoon Musk Perfume',
            type: 'ì˜¤ ë“œ í¼í“¸',
            usage: 'Daily / Office',
            desc: 'íƒ€ì¸ì—ê²Œ ê³¼í•˜ì§€ ì•Šìœ¼ë©´ì„œë„ ë³¸ì¸ì€ í¸ì•ˆí•˜ê²Œ ëŠë¼ëŠ” ì†Œí”„íŠ¸ ë¨¸ìŠ¤í¬ í–¥.'
          },
          {
            name: 'CR-01 Comfort Room Spray',
            type: 'ë£¸ ìŠ¤í”„ë ˆì´',
            usage: 'Home',
            desc: 'ì˜ˆë¯¼í•œ ë‚ , ê³µê°„ ê³µê¸°ë¥¼ ë¶€ë“œëŸ½ê²Œ ë°”ê¿”ì£¼ëŠ” ì½”ì§€ ë¬´ë“œ ìŠ¤í”„ë ˆì´.'
          },
          {
            name: 'CH-01 Cozy Hair Mist',
            type: 'í—¤ì–´ ë¯¸ìŠ¤íŠ¸',
            usage: 'On-the-go',
            desc: 'ì™¸ì¶œÂ·ë¯¸íŒ… ì „í›„ë¡œ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ë³´ì†¡í•œ í—¤ì–´ ë¨¸ìŠ¤í¬ ë¯¸ìŠ¤íŠ¸.'
          }
        ]
      };
    }

    // C. ê¸´ì¥ ë‚®ê³ , í™œë ¥ ë†’ê³ , í”¼ë¡œë„ ë‚®ìŒ â€“ ë¦¬í”„íŠ¸ì—… & í¬ì»¤ìŠ¤
    if (vitality >= 65 && tension <= 45 && fatigue <= 55) {
      return {
        keyword: 'ì§‘ì¤‘ë ¥ Â· ê¸ì • ì—ë„ˆì§€ í¬ì»¤ìŠ¤',
        name: 'Bright Citrus Green',
        notes: 'ë² ë¥´ê°€ëª» Â· ë§Œë‹¤ë¦° Â· ê·¸ë¦°í‹° Â· ë¨¸ìŠ¤í¬',
        desc: 'ë§‘ì€ ì‹œíŠ¸ëŸ¬ìŠ¤ì™€ ê°€ë²¼ìš´ ê·¸ë¦°í‹° ë…¸íŠ¸ê°€ ì‚°ëœ»í•˜ê²Œ ê¸°ë¶„ì„ ëŒì–´ì˜¬ë¦¬ê³ , ì§‘ì¤‘ë ¥ì„ ìœ ì§€í•˜ë„ë¡ ë•ëŠ” ë°ì¼ë¦¬ ì‹œê·¸ë‹ˆì²˜ í–¥ì…ë‹ˆë‹¤.',
        products: [
          {
            name: 'BC-01 Focus Day Perfume',
            type: 'ì˜¤ ë“œ í¼í“¸',
            usage: 'Work / Study',
            desc: 'ì—…ë¬´Â·ì§‘ì¤‘ íƒ€ì„ì— ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ì‹œíŠ¸ëŸ¬ìŠ¤ ê·¸ë¦° í¼í“¸.'
          },
          {
            name: 'BC-02 Productivity Diffuser',
            type: 'ë””í“¨ì €',
            usage: 'Desk',
            desc: 'ì±…ìƒ ìœ„ì— ë‘ê³  ì“°ëŠ”, ë¨¸ë¦¬ë¥¼ ë§‘ê²Œ í•˜ëŠ” ë°ì´íƒ€ì„ ë””í“¨ì €.'
          },
          {
            name: 'BC-03 Pocket Roller',
            type: 'ë¡¤ì˜¨ ì˜¤ì¼',
            usage: 'On-the-go',
            desc: 'íšŒì˜ ì „Â·ë°œí‘œ ì „, ì†ëª©Â·ê´€ìë†€ì´ì— ì‚¬ìš©í•˜ëŠ” í¬ì¼“ ë¡¤ì˜¨.'
          }
        ]
      };
    }

    // D. ë¨¸ë¦¬ê°€ ë©í•˜ê³  í”¼ë¡œí•œ ìƒíƒœ â€“ í´ë¦¬ì–´ í—ˆë¸Œ
    if (focus <= 40 && fatigue >= 60) {
      return {
        keyword: 'ë‘ë‡Œ í´ë¦¬ì–´ Â· ë©˜íƒˆ ë¦¬ì…‹',
        name: 'Clarity Herb',
        notes: 'ë¡œì¦ˆë§ˆë¦¬ Â· ìœ ì¹¼ë¦½íˆ¬ìŠ¤ Â· ë°”ì§ˆ Â· ë ˆëª¬í•„',
        desc: 'ë¨¸ë¦¬ê°€ ì˜ ëŒì•„ê°€ì§€ ì•Šê³  ë©í•œ ë‚ , í—ˆë¸Œ ì•„ë¡œë§ˆì™€ ìƒì¾Œí•œ ë ˆëª¬í•„ì´ ì•ˆê°œ ë‚€ ë“¯í•œ ë¨¸ë¦¿ì†ì„ ê°€ë³ê²Œ ì •ë¦¬í•´ ì¤ë‹ˆë‹¤.',
        products: [
          {
            name: 'CL-01 Brain Wake Mist',
            type: 'í˜ì´ìŠ¤ & ì—ì–´ ë¯¸ìŠ¤íŠ¸',
            usage: 'Morning / Afternoon',
            desc: 'ì˜¤ì „Â·ì˜¤í›„ ìŠ¬ëŸ¼í”„ íƒ€ì„ì— ì–¼êµ´Â·ê³µê°„ì— ê°€ë³ê²Œ ë¿Œë¦¬ëŠ” ë¦¬í”„ë ˆì‹œ ë¯¸ìŠ¤íŠ¸.'
          },
          {
            name: 'CL-02 Deep Focus Oil',
            type: 'ë¡¤ì˜¨ ì˜¤ì¼',
            usage: 'Focus',
            desc: 'ê´€ìë†€ì´Â·ì†ëª©ì— ì‚¬ìš©í•˜ëŠ” ì§‘ì¤‘ë ¥ ë³´ì¡° í—ˆë¸Œ ì˜¤ì¼.'
          },
          {
            name: 'CL-03 Shower Tablet',
            type: 'ìƒ¤ì›Œ íƒœë¸”ë¦¿',
            usage: 'Shower',
            desc: 'ìƒ¤ì›Œ ì‹œ ë°”ë‹¥ì— ë‘ê³  ì“°ëŠ” í—ˆë¸Œ ìŠ¤íŒ€ ìƒ¤ì›Œ íƒœë¸”ë¦¿.'
          }
        ]
      };
    }

    // E. ê¸´ì¥ì€ ë‚®ì€ë°, ê¸°ìš´ì´ ë¹ ì ¸ ìˆëŠ” ìƒíƒœ â€“ ë¶€ë“œëŸ¬ìš´ ë¦¬í”„íŠ¸
    if (vitality <= 40 && tension <= 50 && fatigue <= 65) {
      return {
        keyword: 'ë¶€ë“œëŸ¬ìš´ ê¸°ë¶„ ë¦¬í”„íŠ¸',
        name: 'Soft Citrus Tea',
        notes: 'ê·¸ë¦°í‹° Â· í™”ì´íŠ¸í‹° Â· ì‹œíŠ¸ëŸ¬ìŠ¤',
        desc: 'ê°ì •ì„ ì€ ë‚˜ì˜ì§€ ì•Šì§€ë§Œ ê¸°ìš´ì´ ë¹ ì ¸ ìˆì„ ë•Œ, ì”ì”í•œ í‹° ë² ì´ìŠ¤ ì‹œíŠ¸ëŸ¬ìŠ¤ê°€ ê³¼ìê·¹ ì—†ì´ ê¸°ë¶„ì„ ì‚´ì§ ë„ì›Œì¤ë‹ˆë‹¤.',
        products: [
          {
            name: 'ST-01 Tea Mood Perfume',
            type: 'ì˜¤ ë“œ í¼í“¸',
            usage: 'Daily',
            desc: 'í‹° í–¥ì„ ì¢‹ì•„í•˜ëŠ” ì‚¬ìš©ìë¥¼ ìœ„í•œ ì†Œí”„íŠ¸ ì‹œíŠ¸ëŸ¬ìŠ¤ í‹° í¼í“¸.'
          },
          {
            name: 'ST-02 Tea Time Candle',
            type: 'ìº”ë“¤',
            usage: 'Home / Reading',
            desc: 'ë…ì„œÂ·íœ´ì‹ ì‹œê°„ì— ì–´ìš¸ë¦¬ëŠ” ê·¸ë¦°í‹°Â·í™”ì´íŠ¸í‹° ìº”ë“¤.'
          },
          {
            name: 'ST-03 Mood Spray',
            type: 'ë£¸ & íŒ¨ë¸Œë¦­ ìŠ¤í”„ë ˆì´',
            usage: 'Fabric / Room',
            desc: 'ì†ŒíŒŒÂ·ì»¤íŠ¼Â·ì¹¨êµ¬ì— ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì¼ë¦¬ í‹° ë² ì´ìŠ¤ ìŠ¤í”„ë ˆì´.'
          }
        ]
      };
    }

    // F. ê¸°ë³¸ê°’ â€“ ì• ë§¤í•œ ì¤‘ê°„ ìƒíƒœ: ë°¸ëŸ°ìŠ¤ ìœ ì§€
    return {
      keyword: 'ë§ˆìŒ ê· í˜• Â· ë°ì¼ë¦¬ ë°¸ëŸ°ìŠ¤',
      name: 'Balanced Woody Musk',
      notes: 'í”¼ê·¸ë¦¬í”„ Â· ì•„ì´ë¦¬ìŠ¤ Â· ì‹œë”ìš°ë“œ Â· ì†Œí”„íŠ¸ ë¨¸ìŠ¤í¬',
      desc: 'ê°ì •ì˜ ìƒí•˜ë¥¼ ë¶€ë“œëŸ½ê²Œ ì •ëˆí•´ ì£¼ëŠ” ë°ì¼ë¦¬ìš© ë°¸ëŸ°ì‹± í–¥ì…ë‹ˆë‹¤. ì‚¬ë¬´ì‹¤ê³¼ ì§‘, ì–´ë””ì„œë“  ì•ˆì •ì ì¸ ë¬´ë“œë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.',
      products: [
        {
          name: 'BM-01 Signature Perfume',
          type: 'ì˜¤ ë“œ í¼í“¸',
          usage: 'All-day',
          desc: 'ê³¼í•˜ì§€ ì•Šê²Œ ì¡´ì¬ê°ì„ ë‚¨ê¸°ëŠ” ë°ì¼ë¦¬ ë°¸ëŸ°ìŠ¤ ì‹œê·¸ë‹ˆì²˜ í¼í“¸.'
        },
        {
          name: 'BM-02 Office Diffuser',
          type: 'ë””í“¨ì €',
          usage: 'Office',
          desc: 'ì—…ë¬´ ê³µê°„ì—ì„œ ì¥ì‹œê°„ ì‚¬ìš©í•´ë„ ë¶€ë‹´ ì—†ëŠ” ìš°ë”” ë¨¸ìŠ¤í¬ ë””í“¨ì €.'
        },
        {
          name: 'BM-03 Car Scent Clip',
          type: 'ì¹´ ë””í“¨ì €',
          usage: 'Car',
          desc: 'ìš´ì „ ì¤‘ ê°ì •ì„ ì„ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•´ ì£¼ëŠ” ì¹´ ë””í“¨ì €.'
        }
      ]
    };
  }

  // ğŸ”¥ ì œí’ˆ ì¹´ë“œ ë Œë”ë§
  function renderProductList(products) {
    const container = document.getElementById('product-list');
    if (!container) return;

    container.innerHTML = '';

    if (!products || products.length === 0) {
      const empty = document.createElement('div');
      empty.className = 'scent-card';
      empty.innerHTML = '<div class="scent-desc">í˜„ì¬ í”„ë¡œí•„ì— ë§ëŠ” ì œí’ˆ ë¼ì¸ì—… ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
      container.appendChild(empty);
      return;
    }

    products.forEach((p) => {
      const card = document.createElement('div');
      card.className = 'scent-card';
      card.innerHTML = `
        <div class="scent-name">${p.name}</div>
        <div class="scent-notes">${p.type} Â· ${p.usage}</div>
        <div class="scent-desc">${p.desc}</div>
      `;
      container.appendChild(card);
    });
  }

  // ----- í–¥ ì¶”ì²œ í™”ë©´ ì—…ë°ì´íŠ¸ -----
  function updateScentUI(profile) {
    const keywordEl = document.getElementById('scent-keyword');
    const nameEl = document.getElementById('main-scent-name');
    const notesEl = document.getElementById('main-scent-notes');
    const descEl = document.getElementById('main-scent-desc');
    const metaEl = document.getElementById('main-scent-meta');

    if (!keywordEl || !nameEl || !notesEl || !descEl || !metaEl) return null;

    const config = getScentConfig(profile);

    keywordEl.textContent = config.keyword;
    nameEl.textContent = config.name;
    notesEl.textContent = config.notes;
    descEl.textContent = config.desc;
    metaEl.textContent =
      `ê¸°ì¤€: ê¸´ì¥ë„ ${profile.tension} Â· í™œë ¥ ${profile.vitality} Â· ì§‘ì¤‘ë ¥ ${profile.focus} Â· ì˜ˆë¯¼ë„ ${profile.sensitivity} Â· í”¼ë¡œë„ ${profile.fatigue}`;

    // ì œí’ˆ ë¼ì¸ì—…ë„ í•¨ê»˜ ì—…ë°ì´íŠ¸
    renderProductList(config.products || []);

    return config;
  }

  // ----- íˆìŠ¤í† ë¦¬ ì €ì¥ / ë¡œë“œ -----
  const HISTORY_KEY = 'emotion-scent-history-v1';

  function saveHistory(profile, config) {
    try {
      const prev = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
      const entry = {
        date: new Date().toISOString(),
        profile,
        scentName: config.name,
        keyword: config.keyword
      };
      prev.push(entry);
      // ìµœê·¼ 20ê°œë§Œ ìœ ì§€
      if (prev.length > 20) {
        prev.splice(0, prev.length - 20);
      }
      localStorage.setItem(HISTORY_KEY, JSON.stringify(prev));
    } catch (e) {
      console.warn('íˆìŠ¤í† ë¦¬ ì €ì¥ ì‹¤íŒ¨:', e);
    }
  }

  function loadHistory() {
    try {
      return JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
    } catch (e) {
      console.warn('íˆìŠ¤í† ë¦¬ ë¡œë“œ ì‹¤íŒ¨:', e);
      return [];
    }
  }

  function formatDate(iso) {
    if (!iso) return '';
    try {
      const d = new Date(iso);
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, '0');
      const day = String(d.getDate()).padStart(2, '0');
      const hh = String(d.getHours()).padStart(2, '0');
      const mm = String(d.getMinutes()).padStart(2, '0');
      return `${y}.${m}.${day} ${hh}:${mm}`;
    } catch {
      return iso;
    }
  }

  // íˆìŠ¤í† ë¦¬ í™”ë©´ ë Œë”ë§
  function renderHistoryList() {
    const container = document.getElementById('history-list');
    if (!container) return;

    const list = loadHistory();

    container.innerHTML = '';

    if (!list.length) {
      const empty = document.createElement('div');
      empty.className = 'scent-card';
      empty.innerHTML = `
        <div class="scent-desc">
          ì•„ì§ ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.<br>
          ê°ì • ì¸¡ì •ì„ ì™„ë£Œí•˜ë©´ ì´ê³³ì— ê¸°ë¡ì´ ìŒ“ì…ë‹ˆë‹¤.
        </div>
      `;
      container.appendChild(empty);
      return;
    }

    // ìµœì‹  ê¸°ë¡ì´ ìœ„ë¡œ ì˜¤ë„ë¡ ë’¤ì§‘ê¸°
    const reversed = [...list].reverse();

    reversed.forEach((item) => {
      const { date, profile, scentName, keyword } = item;
      const card = document.createElement('div');
      card.className = 'scent-card';

      card.innerHTML = `
        <div class="history-date">${formatDate(date)}</div>
        <div class="scent-name">${scentName}</div>
        <div class="scent-desc">${keyword}</div>
        <div class="scent-meta">
          ê¸´ì¥ ${profile.tension} Â· í™œë ¥ ${profile.vitality} Â· ì§‘ì¤‘ ${profile.focus} Â·
          ì˜ˆë¯¼ ${profile.sensitivity} Â· í”¼ë¡œ ${profile.fatigue}
        </div>
        <div class="history-chip">
          <span>ğŸ§ </span>
          <span>ìš”ì•½: ${buildSummary(profile)}</span>
        </div>
      `;

      container.appendChild(card);
    });
  }

  // ----- ì´ë²¤íŠ¸ ë°”ì¸ë”© -----
  document.addEventListener('DOMContentLoaded', () => {
    // ì²˜ìŒì—ëŠ” 0ë²ˆ í™”ë©´ë§Œ í‘œì‹œ (Onboarding)
    showScreen(0);

    document.addEventListener('click', (event) => {
      const analyzeBtn = event.target.closest('[data-action="analyze-emotion"]');
      if (analyzeBtn) {
        // 1) ìŠ¬ë¼ì´ë” â†’ ê°ì • í”„ë¡œí•„ ê³„ì‚°
        const profile = calculateEmotionFromSliders();
        if (profile) {
          emotionProfile = profile;
          updateEmotionResultUI(profile);
          const config = updateScentUI(profile);
          if (config) {
            saveHistory(profile, config);
          }
        }

        // 2) ë¶„ì„ ì¤‘ í™”ë©´ìœ¼ë¡œ ì´ë™ (index 2)
        const nextIndex = parseInt(
          analyzeBtn.getAttribute('data-next-screen') || '2',
          10
        );
        showScreen(nextIndex);

        // 3) 1.4ì´ˆ í›„ ê²°ê³¼ í™”ë©´(3)ìœ¼ë¡œ ì´ë™
        setTimeout(() => {
          showScreen(3);
        }, 1400);

        return;
      }

      // ì¼ë°˜ì ì¸ ë‹¤ìŒ í™”ë©´ ì´ë™ ë²„íŠ¼ ì²˜ë¦¬
      const btn = event.target.closest('[data-next-screen]');
      if (!btn) return;

      const nextIndex = parseInt(btn.getAttribute('data-next-screen'), 10);
      if (!isNaN(nextIndex)) {
        showScreen(nextIndex);
      }
    });
  });
</script>

</body>
</html>
